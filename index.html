<!DOCTYPE html>
<html>
<head>
    <title>Payment Demo</title>
</head>
<body>

<h2>Buy Product - â‚¹49</h2>

<button onclick="pay()">Pay Now</button>

<script>
async function pay() {
    try {
        const res = await fetch("/api/create-order", { 
            method: "POST"
        });

        const data = await res.json();
        
        if (!data.payment_link) {
            alert("Error: payment link missing");
            console.log(data);
            return;
        }

        window.location.href = data.payment_link;

    } catch (err) {
        console.error(err);
        alert("Something went wrong");
    }
}
</script>

</body>
</html>
